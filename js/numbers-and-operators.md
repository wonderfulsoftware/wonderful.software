---
draft: true
---

# ตัวเลขและตัวดำเนินการ (Numbers and Operators)

## มีแค่ไม่กี่คนที่ตอบถูก!

- ถ้าคุณเคยไถเฟสบุ๊ก คุณอาจจะเคยเห็นโพสต์แบบนี้มาบ้าง:

  ![](https://im.dt.in.th/ipfs/bafybeiefrwfs4nejkvpxjezicajl5xo7fzkxechzugy6g63ffdwsh63crq/image.webp)

  > ตอบเท่าไหร่ ?? \
  > **10 + 10 &times; 0 + 10 = ?**
  >
  > (a) 10
  > (b) 20
  > (c) 110
  > (d) 200
  >
  > มีคนเพียง 8% เท่านั้นที่ตอบถูก!

  แล้วในคอมเม้นต์ก็มีแต่คนมาเถียงกันไม่จบไม่สิ้นว่าตกลงคำตอบที่ถูกต้องคือเท่าไหร่

- ซึ่งถ้าจะถามว่าตกลงคำตอบที่ถูกต้องมันคือเท่าไหร่
  เราก็อาจจะยังฟันธงไม่ได้ซะทีเดียว
  เพราะคำถามนี้มันกำกวม (ambiguous) มันไม่ชัดเจนพอ มันไม่ได้ระบุเลยด้วยซ้ำ ว่าโจทย์นี้ควรจะตีความยังไง

- ถ้าเราเปลี่ยนโจทย์เป็น… **ถ้ากดปุ่มตามนี้ใส่ในเครื่องคิดเลขแล้วจะได้คำตอบเท่าไหร่** ดูชัดเจนขึ้นไหมครับ

  ![](https://im.dt.in.th/ipfs/bafybeiha7vpgummeogw33owyv2eyrlkscpbijzwqmkoflms5bfeuiul7nu/image.webp)

- ผมว่ามันก็ชัดเจนขึ้นนะ
  แต่ว่าก็ยังกำกวมอยู่ดี เพราะเครื่องคิดเลขมีหลายยี่ห้อ
  ถ้าใช้เครื่องคิดเลขบน macOS ก็จะได้คำตอบเป็น 20
  แต่ถ้าใช้เครื่องคิดเลขบน Windows แบบเบสิค ก็จะได้คำตอบเป็น 10

  <video src="https://im.dt.in.th/ipfs/bafybeieaylmbi6cvvbiy7ppfob36f53jwoux5gudqeqrao54fearl5zn24/calcs.mp4" muted autoplay loop controls></video>

- หรือถ้าเราเปลี่ยนโจทย์เป็น **ให้คำนวณคำตอบโดย[<span style="font-weight:bold">อิงลำดับการดำเนินการตามกฏ PEMDAS</span>](https://nuuneoi.com/blog/blog.php?read_id=896) ได้คำตอบเท่าไหร่**
  อันนี้ค่อนข้างชัดเจน
  กฏ PEMDAS บอกว่าให้ทำการคูณก่อนบวก
  กรณีนี้ก็จะได้คำตอบเป็น 20

  ![](https://im.dt.in.th/ipfs/bafybeifatafeeqn3sni4gagx2qhn374pjkoj7ihucdjhbkzoq75lhammsi/image.webp)

- ลองเปลี่ยนโจทย์ดูอีกสักรอบ **ให้แปลงโจทย์เป็นภาษา JavaScript แล้วเอาไปรันใน Console ได้คำตอบเท่าไหร่**
  อันนี้ค่อนข้างชัดเจนเช่นกัน
  ถ้าทำตามก็จะได้คำตอบเป็น 20 ครับ

  ![](https://im.dt.in.th/ipfs/bafybeihw4ajwqs7gitki4njuwboxpmepvsn2lsmtkr5jacgasdogwh62yq/image.webp)

- **แต่ทำไมถึงได้ 20 ล่ะ?**
  นี่คือสิ่งที่เราจะมาหาคำตอบกันในหัวข้อนี้ครับ

## เอกซ์เพรสชัน (นิพจน์) และตัวดำเนินการ

- ก่อนที่เราจะไปกันต่อ
  ผมอยากจะแนะนำให้รู้จักคำศัพท์ต่างๆ ที่สำคัญก่อนครับ

- **Expression**
  (แปลเป็นภาษาไทยว่า “นิพจน์”
  คำว่า “พจน์” มีรากศัพท์มาจากคำว่า ‘วจน’ ที่แปลว่า ‘คำพูด’ หรือ ‘ถ้อยคำ’ ครับ)
  คำว่า Expression ในเชิงการเขียนโปรแกรม ความหมายของมันคือ “ชิ้นส่วนของโค้ดที่เราเขียน ที่สามารถนำมาหาค่า หรือ Value ได้”

  ![](https://im.dt.in.th/ipfs/bafybeibqfm6awu7gxedrumvdc7wyzrkhig47hns6cvfxhol5zwn4c65zwq/image.webp)

  > “An **expression** is a valid unit of code that resolves to a _value_” \
  > [— MDN. “Expressions and Operators.” _JavaScript Guide._](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators#:~:text=an%20expression%20is%20a%20valid%20unit%20of%20code%20that%20resolves%20to%20a%20value)

- อันนี้คือตัวอย่าง Expression อย่างง่ายครับ คือมีแค่ตัวเลขเดียว
  “ค่าของ `123` คือเท่าไหร่” คำตอบคือ 123 ครับ

  ![](https://im.dt.in.th/ipfs/bafybeig5xqqwvulxus5z5nce7ealyo6vf3ifyriof3bdywzj7qcbimkuzy/image.webp)

- เราสามารถสร้าง Expression ที่ซับซ้อนขึ้นได้
  โดยการเอา Expression ที่ขนาดเล็กกว่ามาประกอบกัน โดยใช้สิ่งที่เรียกว่า Operator (หรือ ตัวดำเนินการ) เป็นตัวเชื่อมครับ
  “ค่าของ `123 * 456` คือเท่าไหร่” คำตอบคือ 56088 ครับ

  ![](https://im.dt.in.th/ipfs/bafybeifw4xbfz5aoyluht7qcugn7nqcw7odgrc2wyjbx5oopjmrehfygmy/image.webp)

  > “complex expressions are joined by operators” \
  > [— MDN. “Expressions and Operators.” _JavaScript Guide._](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators#:~:text=complex%20expressions%20are%20joined%20by%20operators)

- ภาษา JavaScript มี Operator ให้เราเลือกใช้เยอะมาก
  แต่ในคอร์สนี้เราจะได้เรียนรู้แค่บางตัว

  ![](https://im.dt.in.th/ipfs/bafybeigacvdlqbhkc533p2oblbfl3inn7j6bzaaco6je73tamwuga4leca/image.webp)

<!--
- ในการเขียนโปรแกรม ค่า (value) คือข้อมูลที่อยู่ในหน่วยความจำ (memory) ของคอมพิวเตอร์[^memory]
  เวลาผมเขียนโค้ดว่า 123
  ตอนที่โค้ดนี้ทำงาน คอมพิวเตอร์ก็จะเอาค่า 123 ไปเก็บไว้ในหน่วยความจำ

- ส่วนตัวดำเนินการ (operator) ทำหน้าที่เอาค่าต่างๆ มาดำเนินการอะไรสักอย่างกับมัน เพื่อให้ได้เป็นค่าใหม่ออกมา

- เช่น `*` เป็น operator แทนการคูณ ซึ่งเราสามารถเขียนโค้ดได้ว่า `123 * 456`
  ซึ่งเมื่อโค้ดนี้ทำงาน คอมพิวเตอร์ก็จะเอาค่าที่อยู่ฝั่งซ้าย กับค่าที่อยู่ฝั่งขวา มาคูณกัน ก็จะได้เป็นค่าใหม่ออกมาคือ 56088

- ณ จุดนี้ ตัวเลข 123 กับ 456 ไม่ได้ถูกใช้งานแล้ว
  และเมื่อถึงเวลา ค่าที่ไม่ได้ใช้งานก็จะถูกเคลียร์ออกจากหน่วยความจำ
  เพื่อให้หน่วยความจำนั้นว่างไว้ให้ใช้งานอย่างอื่นต่อไป[^mgmt]

[^memory]:
    บางคนอาจจะยกมือถามว่า “หน่วยความจำที่ว่า คือ RAM ใช่ไหม?”
    คำตอบคือ ในเครื่องคอมพิวเตอร์มีชิ้นส่วนที่ทำหน้าที่เป็นหน่วยความจำหลายแบบ ตั้งแต่ register, cache, RAM ไปจนถึง hard disk
    แต่ในบทนี้เราจะใช้คำว่า “หน่วยความจำ” เพื่อสื่อความว่า ข้อมูลของเราอยู่ในสักที่ในเครื่องคอมพิวเตอร์ แต่ไม่ได้เจาะจงว่าอยู่ที่ชิ้นไหนครับ

    โดยทั่วไป ข้อมูลที่คอมพิวเตอร์ประมวลผลมักเก็บใน RAM (หรือ main memory)
    แต่บางครั้งถ้า RAM ในเครื่องไม่พอ ตัวระบบปฏิบัติการอาจจะเอาข้อมูลที่ยังไม่ได้ใช้บางส่วนไปเก็บใน hard disk ชั่วคราว (เรียกว่า swapping หรือ paging) แล้วค่อยดึงกลับเข้ามาใน RAM เมื่อถูกเรียกใช้ในภายหลัง
    นอกจากนี้ ข้อมูลบางส่วนที่ใช้เป็นระยะเวลาสั้นมากๆ อาจจะเก็บไว้ที่ register ของ CPU ตรงๆ ไปเลย ซึ่งเป็นหน่วยความจำที่เร็วที่สุดในเครื่องคอมพิวเตอร์ ทำให้ไม่ต้องไปคุยกับ RAM
    นอกจากนี้ ระหว่างตัว CPU กับ RAM ยังมีหน่วยความจำที่เรียกว่า cache อยู่อีก เพื่อให้การเข้าถึงข้อมูลใน RAM ที่ใช้บ่อยๆ ได้เร็วขึ้น — รายละเอียดพวกนี้ ในช่วงที่เพิ่งหัดเขียนโปรแกรม ยังไม่จำเป็นต้องรู้ก็ได้
    แต่เมื่อเราต้องเขียนโปรแกรมที่ต้องทำงานกับข้อมูลจำนวนมากแล้วมันช้า การรู้่เรื่องพวกนี้ก็จะช่วยให้เราเขียนโปรแกรมให้เร็วขึ้นได้

[^mgmt]:
    ไม่ใช่ทุกภาษาที่ทำแบบนี้ — ภาษา JavaScript (รวมถึง Python, Ruby, Java, Go, C#, ฯลฯ) เป็นภาษาที่มีการจัดการหน่วยความจำให้เราเอง (automatic memory management)
    ในขณะที่บางภาษา (เช่น C, C++, Rust) จะต้องจัดการหน่วยความจำด้วยตัวเอง (manual memory management) นั่นหมายความว่าในภาษาเหล่านี้ เราต้องเขียนโค้ดเพื่อจองพื้นที่ในหน่วยความจำเมื่อเราต้องการใช้งาน และคืนพื้นที่ให้กับระบบเมื่อเราไม่ได้ใช้งานอีกต่อไป

    ข้อดีของ automatic memory management คือ มันทำให้เราเขียนโค้ดได้ง่ายขึิ้่น แต่ข้อเสียคือ บางครั้งโปรแกรมของเราจะต้องหยุดทำงานชั่วคราว เพื่อเช็คว่ามีส่วนไหนของหน่วยความจำที่ไม่ได้ใช้งานอยู่แล้วบ้าง แล้วคืนพื้นที่ให้กับระบบ (เรียกว่า garbage collection)
    เช่นเดียวกับหมายเหตุก่อนหน้า รายละเอียดพวกนี้ ในช่วงที่เพิ่งหัดเขียนโปรแกรม ยังไม่จำเป็นต้องรู้ก็ได้ -->

## ลำดับการทำงานของตัวดำเนินการ (Operator precedence and associativity)

- กลับมาที่โจทย์เดิิมกัน:

  ![](https://im.dt.in.th/ipfs/bafybeihw4ajwqs7gitki4njuwboxpmepvsn2lsmtkr5jacgasdogwh62yq/image.webp)

- เวลาเรามีข้อมูล 4 ชิ้น
  เอามาดำเนินการอะไรซักอย่างกัน…

  ![](https://im.dt.in.th/ipfs/bafybeidekeeouk2by5sxjpxeo7vosimeze4ferwiixxxl3lsbuor6xipdq/image.webp)

- …ถ้าเราไม่รู้ว่าตัวดำเนินการแต่ละตัว เป็นตัวอะไรบ้าง ความหมายมันก็จะค่อนข้างกำกวมครับ
  เพราะว่าเราสามารถจัดรูปแบบ (ใส่วงเล็บ) ให้มันได้ถึง 5 วิธีที่แตกต่างกัน
  ซึ่งแต่ละวิธีก็มีโอกาสที่จะได้คำตอบที่แตกต่างกันออกไป

  ![](https://im.dt.in.th/ipfs/bafybeige6dnawdfd6kbrm56ulqiw2mcszmxgaokvskizqwaeh4j5ltxu64/image.webp)

- อย่าง `10 + 10 * 10 + 10`
  ถ้าหากเราไม่รู้เรื่องลำดับการทำงานของตัวดำเนินการ
  เราก็อาจจะใส่วงเล็บได้ 5 วิธีดังนี้ครับ:

  | ตัวอย่างการใส่วงเล็บ   | คำตอบ |
  | ---------------------- | ----: |
  | `((10 + 10) * 0) + 10` |    10 |
  | `10 + (10 * (0 + 10))` |   110 |
  | `(10 + (10 * 0)) + 10` |    20 |
  | `10 + ((10 * 0) + 10)` |    20 |
  | `(10 + 10) * (0 + 10)` |   200 |

- …แล้วการใส่วงเล็บแบบไหนล่ะ ที่ถูกต้อง

- แหล่งข้อมูลสำคัญ ที่จะช่วยให้เราหาคำตอบนี้ได้ก็คือ [**JavaScript Reference**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference) หรือ **“เอกสารอ้างอิงภาษา JavaScript”** ครับ

- ในเอกสารนี้จะมีบทนึงที่พูดถึงสิ่งที่เรียกว่า [**Operator precedence**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence) หรือ **“ลำดับการทำงานของตัวดำเนินการ”** ครับ
  เลื่อนลงมาเราจะเจอกับตารางที่บอกลำดับการทำงานของ Operator แต่ละตัวครับ

  และในตารางนี้เอง ที่เราจะได้เห็นว่า การคูณ (`*`) มีลำดับความสำคัญที่สูงกว่าการบวก (`+`) ครับ

  ![](https://im.dt.in.th/ipfs/bafybeidnap7pgz5hlm6sxs4d7xbbpy5dcxzowspginaunf3rhi4jz3aqnm/image.webp)

- นั่นหมายความว่า ถ้าเรามีตัวดำเนินการคุณ กับตัวดำเนินการบวก
  เราจะจับกลุ่มให้ตัวดำเนินการคูณก่อนครับ

  <!-- prettier-ignore -->
  ```js
  10 + (10 * 0) + 10
  ```

- คราวนี้ เราเหลือของ 3 อย่าง มาบวกกันแล้ว
  แต่ทีนี้ เนื่องจากทั้ง Operator ด้านซ้ายเป็นการบวก และ Operator ด้านขวาก็เป็นการบวกด้วย
  แปลว่าทั้งสองตัวมีลำดับความสำคัญเท่ากัน

- แต่ในตารางเดียวกันนี้ ก็ได้ระบุไว้ด้วยว่า
  เครื่องหมาย `+` จะมีสิ่งที่เรียกว่า associativity จากซ้ายไปขวา

  ![](https://im.dt.in.th/ipfs/bafybeiboz35mytib6duh3ref3t3emgtdlxcedlxrplft7foi4qijqvi2yu/image.webp)

- นั่นแปลว่า ให้เราจับกลุ่มเครื่องหมาย + จากซ้ายไปขวาครับ

  <!-- prettier-ignore -->
  ```js
  (10 + (10 * 0)) + 10
  ```

- แค่นี้มันก็ไม่กำกวมแล้ว และเราสามารถคำนวณคำตอบได้เป็น 20 ครับ

## ตัวเลข (Numbers)

- ในช่วงท้ายของหัวข้อนี้
  เรามาเรียนรู้เกี่ยวกับเรื่องตัวเลขให้ละเอียดขึ้นกันนิดนึงดีกว่าครับ

  ::: warning 🧐 Deep dive

  ในส่วนนี้จะเป็นความรู้เชิงลึกครับ ไม่ต้องเข้าใจทั้งหมดก็ได้

  :::

- ในภาษา javascript เราสามารถเขียนตัวเลขได้หลายวิธีครับ
  อันนี้คือเบสิคสุด คือจำนวนเต็มธรรมดาครับ

  ```js
  > 123
  123
  ```

- จำนวนทศนิยม ก็เขียนได้ โดยใส่เครื่องหมาย . เข้าไปครับ

  ```js
  > 3.14
  3.14
  ```

- ถ้าใส่เครื่องหมายลบข้างหน้า ก็จะได้เป็นตัวเลขติดลบครับ

  ```js
  > -128
  -128
  ```

- เราสามารถเอาตัวเลขมาบวก ลบ คูณ หารกันได้

  ```js
  > 25 * 25
  625
  ```

- หรือถ้าเราเอา `0.1` มาบวกกับ `0.2` เราก็จะได้…

  ```js
  > 0.1 + 0.2
  0.30000000000000004
  ```

  …อ้าว ทำไมเป็นแบบนี้ล่ะ?
  ทำไม 0.1 + 0.2 ไม่ได้ 0.3 ล่ะ
  คอมพิวเตอร์คำนวณผิดหรือเปล่า หรือมันมั่วหรือเปล่า?

  - อย่างที่เคยเกริ่นไว้ในบทแรกครับ
    แทบทุกอย่างที่คอมพิวเตอร์ทำ มีเหตุผลอธิบายได้เสมอ

- คือมาตรฐานของภาษา JavaScript ได้ระบุไว้ว่า
  ตัวเลขต่างๆ จะเก็บไว้ในหน่วยความจำ ในรูปแบบที่เรียกกันว่า
  “double-precision floating-point”

- พูดง่ายๆ ก็คือ
  มนุษย์ กับ คอมพิวเตอร์ ประมวลผลตัวเลข คนละวิธีกันครับ

- เวลาผมเขียนตัวเลข 0.1 กับ 0.2
  คอมพิวเตอร์จะเก็บมันในหน่วยความจำ แต่ในรูปของเลข 0 กับ 1 จำนวน 64 ตัว

  ![](https://im.dt.in.th/ipfs/bafybeifqzkmbrxxt4jvfei6qun5h2zpxiwd4fcn24kroxpftiy3lfyorme/image.webp)

- และนี่คือค่าจริงๆ ที่คอมพิวเตอร์เก็บ
  วิธีเก็บตัวเลขแบบนี้
  ไม่สามารถเก็บตัวเลขทศนิยมแบบเป๊ะๆ ได้ครับ
  เก็บได้แค่ค่าประมาณ
  แต่ก็มีความแม่นยำพอในการใช้งานส่วนใหญ่

  ![](https://im.dt.in.th/ipfs/bafybeican2x6cpm2p5few4ftkxgx73vx2ny666ob6dweyrmynl5ewhzg7q/image.webp)

- ทีนี้ พอเอามาบวกกันก็จะได้ตัวเลขนี้ครับ
  แต่ตอนที่เอามาแสดงผล มันถูกตัดตอนตรงหลังเลข 4 พอดี
  จึงเห็นเป็น 0.30000000000000004

  ![](https://im.dt.in.th/ipfs/bafybeib3htav4ngaco6yriwqvokbgbq77qe7jcm7ei2zleyxjb3o2ikuua/image.webp)

  ตรงส่วนนี้ ถ้าไม่เข้าใจก็ไม่เป็นไรนะครับ
  แค่จะโชว์ให้ดูว่า มันมีเหตุผลของมัน[^double]

- และเหตุผลเดียวกันนี้เอง ทำให้เวลาเราเก็บข้อมูลตัวเลขที่เยอะมากๆ ใน JavaScript
  บางทีจะเกิดการปัดขึ้น หรือปัดลง ไปยังตัวเลขที่ใกล้เคียงครับ[^bigint]

  ![](https://im.dt.in.th/ipfs/bafybeihf4jjbrsn4u5wxdbbhabnqsgopcjv4bmm5a42uf7aqson6wd2gpi/image.webp)

## เกร็ดความรู้เพิ่มเติมเกี่ยวกับตัวเลข

- ต่อไปนี้ คือเกร็ดความรู้เพิ่มเติมเกี่ยวกับตัวเลขครับ
  เกร็ดความรู้พวกนี้ ถ้าไม่รู้ ก็ไม่ได้ทำให้เขียนโค้ดไม่ได้ครับ
  แต่เวลาเราอ่านโค้ดของคนอื่น บางทีก็จะเจอของพวกนี้ครับ เลยอยากให้รู้ว่ามันมีของพวกนี้อยู่ด้วย

- เวลาตัวเลขมีจำนวนหลักมากๆ แล้วถ้ามันอ่านยาก
  เราสามารถใส่เครื่องหมาย `_` คั่นไว้ เพื่อให้อ่านง่ายขึ้นได้ครับ

  ```js
  > 1_000_000
  1000000
  ```

  แต่ห้ามใส่เครื่องหมายเว้นวรรค ก่อนหรือหลังตัว underscore

  ```js
  > 1 _ 000 _ 000
  // ! Uncaught SyntaxError: Unexpected identifier '_'
  ```

- ตัวเลขจำนวนเต็มที่ขึ้นต้นด้วย `0` จะถือว่าเป็นตัวเลขที่เขียนในรูปของเลขฐานแปด (octal)

  ```js
  > 031
  25
  ```

- จำนวนเต็มที่ขึ้นต้นด้วย `0b` จะถือว่าเป็นตัวเลขที่เขียนในรูปของเลขฐานสอง (binary)

  ```js
  > 0b01100001
  97
  ```

- และจำนวนเต็มที่ขึ้นต้นด้วย `0x` จะถือว่าเป็นตัวเลขที่เขียนในรูปของเลขฐานสิบหก (hexadecimal)

  ```js
  > 0x61
  97
  ```

- เราสามารถใส่ตัว `e` เพื่อเขียนตัวเลขในรูปแบบของสัญลักษณ์วิทยาศาสตร์ได้

  ```js
  > 1.2e6
  1200000

  > 1e-2
  0.01
  ```

  โดยห้ามมีช่องว่างระหว่าง `e` กับตัวเลขครับ

  ```js
  > 1e - 2
  // ! Uncaught SyntaxError: Invalid or unexpected token
  ```

[^double]:
    ถ้าอยากเข้าใจแบบละเอียดมากขึ้น
    ก็ไปอ่านบทความเรื่อง [What Every Computer Scientist Should Know About Floating-Point](https://docs.oracle.com/cd/E19957-01/800-7895/800-7895.pdf) Arithmetic (ยาว 74 หน้า) ดูได้ครับ
    ผมเองก็ยังอ่านบทความนี้ไม่ค่อยรู้เรื่องเหมือนกัน ลึกเกิน

[^bigint]:
    หากต้องการที่จะเก็บข้อมูลตัวเลขที่มีค่าเยอะขนาดนั้น (ตัวเลขที่มากกว่า 9,007,199,254,740,991) อย่างแม่นยำจริงๆ
    ภาษา JavaScript มีชนิดข้อมูล BigInt ให้ใช้ แต่จะไม่ได้สอนในคอร์สนี้ครับ

## Up next

- ต่อไป เรามาทำแบบฝึกหัดสั้นๆ กันดีกว่าครับ
