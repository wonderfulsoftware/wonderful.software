---
draft: true
---

# ตัวเลขและตัวดำเนินการ (Numbers and Operators)

## มีแค่ไม่กี่คนที่ตอบถูก!

- ถ้าคุณเคยไถเฟสบุ๊ก คุณอาจจะเคยเห็นโพสต์แบบนี้มาบ้าง:

  > คุณคิดว่าคำตอบของปัญหานี้คืออะไร?
  >
  > **10 + 10 &times; 0 + 10 = ?**
  >
  > (a) 10 \
  > (b) 20 \
  > (c) 110 \
  > (d) 200
  >
  > คนเพียง 8% เท่านั้นที่ตอบถูก!

  แล้วในคอมเม้นต์ก็มีแต่คนมาเถียงกันไม่จบไม่สิ้นว่าตกลงคำตอบที่ถูกต้องคือเท่าไหร่

- ซึ่งถ้าจะถามว่าตกลงคำตอบที่ถูกต้องมันคือเท่าไหร่
  เราก็อาจจะยังฟันธงไม่ได้ซะทีเดียว
  เพราะคำถามนี้มันไม่ precise หรือไม่ชัดเจนพอ
  มันไม่ได้ระบุเลยด้วยซ้ำ ว่าโจทย์นี้ควรจะตีความยังไง

  - ถ้าเราตีความว่า “ให้กดปุ่มบนเครื่องคิดเลขตามโจทย์ แล้วทายว่าคำตอบจะได้เท่าไหร่”
    ก็ยังตอบไม่ได้อยู่ดี เพราะเครื่องคิดเลขมีหลายยี่ห้อ และหลายโหมด
    ถ้าใช้เครื่องคิดเลขบน macOS ก็จะได้คำตอบเป็น 20
    แต่ถ้าใช้เครื่องคิดเลขบน Windows แบบเบสิค ก็จะได้คำตอบเป็น 10

  - หรือถ้าเราตีความว่า “ให้คำนวณคำตอบโดย[อิงลำดับการดำเนินการตามกฏ PEMDAS](https://nuuneoi.com/blog/blog.php?read_id=896)”
    ก็จะทำการคูณก่อนแล้วค่อยบวก กรณีนี้ก็จะได้คำตอบเป็น 20

  - และถ้าตีความว่า “เอาเขียนเป็นภาษา JavaScript จะได้คำตอบเท่าไหร่”
    ก็จะได้คำตอบเป็น 20 ครับ
    …แต่ทำไมถึงได้ 20 ล่ะ?
    เราจะมาเรียนรู้เรื่องนี้กันในหัวข้อนี้ครับ

    ![](https://im.dt.in.th/ipfs/bafybeihw4ajwqs7gitki4njuwboxpmepvsn2lsmtkr5jacgasdogwh62yq/image.webp)

## เอกซ์เพรสชัน (นิพจน์) และตัวดำเนินการ

- ก่อนที่เราจะไปกันต่อ
  ผมอยากจะแนะนำให้รู้จักคำศัพท์ต่างๆ ที่สำคัญก่อนครับ

- **Expression**
  คำว่า Expression แปลเป็นภาษาไทยว่า “นิพจน์” ครับ
  คำว่า “พจน์” มีรากศัพท์มาจากคำว่า ‘วจน’ ที่แปลว่า ‘คำพูด’ หรือ ‘ถ้อยคำ’ ครับ
  ดังนั้น Expression คือ “ชิ้นส่วนของโค้ดที่เราเขียน ที่สามารถนำมาหาค่า หรือ Value ได้”

  ![](https://im.dt.in.th/ipfs/bafybeibqfm6awu7gxedrumvdc7wyzrkhig47hns6cvfxhol5zwn4c65zwq/image.webp)

- อันนี้คือตัวอย่าง Expression อย่างง่ายครับ คือมีแค่ตัวเลขเดียว
  “ค่าของ `123` คือเท่าไหร่” คำตอบคือ 123 ครับ

  ```js
  ​> 123
  123
  ```

- เราสามารถสร้าง Expression ที่ซับซ้อนขึ้นได้
  โดยการเอา Expression ที่ขนาดเล็กกว่ามาประกอบกัน โดยใช้สิ่งที่เรียกว่า Operator (หรือ ตัวดำเนินการ) เป็นตัวเชื่อมครับ
  “ค่าของ `123 * 456` คือเท่าไหร่” คำตอบคือ 56088 ครับ

  ```js
  ​> 123 * 456
  56088
  ```

- ภาษา JavaScript มี Operator ให้เราเลือกใช้เยอะมาก
  แต่ในคอร์สนี้เราจะได้เรียนรู้แค่บางตัวครับ

  ![](https://im.dt.in.th/ipfs/bafybeigacvdlqbhkc533p2oblbfl3inn7j6bzaaco6je73tamwuga4leca/image.webp)

<!--
- ในการเขียนโปรแกรม ค่า (value) คือข้อมูลที่อยู่ในหน่วยความจำ (memory) ของคอมพิวเตอร์[^memory]
  เวลาผมเขียนโค้ดว่า 123
  ตอนที่โค้ดนี้ทำงาน คอมพิวเตอร์ก็จะเอาค่า 123 ไปเก็บไว้ในหน่วยความจำ

- ส่วนตัวดำเนินการ (operator) ทำหน้าที่เอาค่าต่างๆ มาดำเนินการอะไรสักอย่างกับมัน เพื่อให้ได้เป็นค่าใหม่ออกมา

- เช่น `*` เป็น operator แทนการคูณ ซึ่งเราสามารถเขียนโค้ดได้ว่า `123 * 456`
  ซึ่งเมื่อโค้ดนี้ทำงาน คอมพิวเตอร์ก็จะเอาค่าที่อยู่ฝั่งซ้าย กับค่าที่อยู่ฝั่งขวา มาคูณกัน ก็จะได้เป็นค่าใหม่ออกมาคือ 56088

- ณ จุดนี้ ตัวเลข 123 กับ 456 ไม่ได้ถูกใช้งานแล้ว
  และเมื่อถึงเวลา ค่าที่ไม่ได้ใช้งานก็จะถูกเคลียร์ออกจากหน่วยความจำ
  เพื่อให้หน่วยความจำนั้นว่างไว้ให้ใช้งานอย่างอื่นต่อไป[^mgmt]

[^memory]:
    บางคนอาจจะยกมือถามว่า “หน่วยความจำที่ว่า คือ RAM ใช่ไหม?”
    คำตอบคือ ในเครื่องคอมพิวเตอร์มีชิ้นส่วนที่ทำหน้าที่เป็นหน่วยความจำหลายแบบ ตั้งแต่ register, cache, RAM ไปจนถึง hard disk
    แต่ในบทนี้เราจะใช้คำว่า “หน่วยความจำ” เพื่อสื่อความว่า ข้อมูลของเราอยู่ในสักที่ในเครื่องคอมพิวเตอร์ แต่ไม่ได้เจาะจงว่าอยู่ที่ชิ้นไหนครับ

    โดยทั่วไป ข้อมูลที่คอมพิวเตอร์ประมวลผลมักเก็บใน RAM (หรือ main memory)
    แต่บางครั้งถ้า RAM ในเครื่องไม่พอ ตัวระบบปฏิบัติการอาจจะเอาข้อมูลที่ยังไม่ได้ใช้บางส่วนไปเก็บใน hard disk ชั่วคราว (เรียกว่า swapping หรือ paging) แล้วค่อยดึงกลับเข้ามาใน RAM เมื่อถูกเรียกใช้ในภายหลัง
    นอกจากนี้ ข้อมูลบางส่วนที่ใช้เป็นระยะเวลาสั้นมากๆ อาจจะเก็บไว้ที่ register ของ CPU ตรงๆ ไปเลย ซึ่งเป็นหน่วยความจำที่เร็วที่สุดในเครื่องคอมพิวเตอร์ ทำให้ไม่ต้องไปคุยกับ RAM
    นอกจากนี้ ระหว่างตัว CPU กับ RAM ยังมีหน่วยความจำที่เรียกว่า cache อยู่อีก เพื่อให้การเข้าถึงข้อมูลใน RAM ที่ใช้บ่อยๆ ได้เร็วขึ้น — รายละเอียดพวกนี้ ในช่วงที่เพิ่งหัดเขียนโปรแกรม ยังไม่จำเป็นต้องรู้ก็ได้
    แต่เมื่อเราต้องเขียนโปรแกรมที่ต้องทำงานกับข้อมูลจำนวนมากแล้วมันช้า การรู้่เรื่องพวกนี้ก็จะช่วยให้เราเขียนโปรแกรมให้เร็วขึ้นได้

[^mgmt]:
    ไม่ใช่ทุกภาษาที่ทำแบบนี้ — ภาษา JavaScript (รวมถึง Python, Ruby, Java, Go, C#, ฯลฯ) เป็นภาษาที่มีการจัดการหน่วยความจำให้เราเอง (automatic memory management)
    ในขณะที่บางภาษา (เช่น C, C++, Rust) จะต้องจัดการหน่วยความจำด้วยตัวเอง (manual memory management) นั่นหมายความว่าในภาษาเหล่านี้ เราต้องเขียนโค้ดเพื่อจองพื้นที่ในหน่วยความจำเมื่อเราต้องการใช้งาน และคืนพื้นที่ให้กับระบบเมื่อเราไม่ได้ใช้งานอีกต่อไป

    ข้อดีของ automatic memory management คือ มันทำให้เราเขียนโค้ดได้ง่ายขึิ้่น แต่ข้อเสียคือ บางครั้งโปรแกรมของเราจะต้องหยุดทำงานชั่วคราว เพื่อเช็คว่ามีส่วนไหนของหน่วยความจำที่ไม่ได้ใช้งานอยู่แล้วบ้าง แล้วคืนพื้นที่ให้กับระบบ (เรียกว่า garbage collection)
    เช่นเดียวกับหมายเหตุก่อนหน้า รายละเอียดพวกนี้ ในช่วงที่เพิ่งหัดเขียนโปรแกรม ยังไม่จำเป็นต้องรู้ก็ได้ -->

## ตัวเลข (Numbers)

- เรามาเรียนรู้วิธีการเขียนตัวเลขกันดีกว่า

- เราสามารถเขียนตัวเลขเป็นจำนวนเต็ม เช่น `123`
  หรือเป็นเลขทศนิยม เช่น `3.14` ได้

- เราสามารถเอาตัวเลขมาบวก ลบ คูณ หารกันได้

  ```js
  > 25 * 25
  625
  ```

- หรือถ้าเราเอา `0.1` มาบวกกับ `0.2` เราก็จะได้…

  ```js
  > 0.1 + 0.2
  0.30000000000000004
  ```

  …อ้าว ทำไมเป็นแบบนี้ล่ะ?
  ทำไม 0.1 + 0.2 ไม่ได้ 0.3 ล่ะ
  คอมพิวเตอร์คำนวณผิดหรือเปล่า

- อย่างที่เคยบอกในบทก่อนหน้าครับ แทบทุกอย่างที่คอมพิวเตอร์มันทำ มีเหตุผลอธิบายได้เสมอ

  - คือมาตรฐานของภาษา JavaScript ได้ระบุไว้ว่า ตัวเลขต่างๆ จะเก็บไว้ในหน่วยความจำ ในรูปแบบที่เรียกกันว่า “double-precision floating-point” (ซึ่งภายใต้มาตรฐานนี้ ตัวเลขต่างๆ จะเก็บอยู่ในรูปของเลขฐาน 2 จำนวน 64 หลัก หรือ 64-bit)
    ซึ่งผลพวงของมันคือ มันจะไม่สามารถเก็บตัวเลขทศนิยมได้อย่างแม่นยำ เก็บได้แค่ค่าประมาณเท่านั้น เมื่อเอาค่าประมาณมาคำนวณกัน ก็ทำให้เกิดความคลาดเคลื่อนขึ้นได้

  - นอกจากนี้ ถ้าเกิดเราเก็บตัวเลขที่เยอะแบบเยอะมากๆ จะเกิดการปัดขึ้นหรือปัดลงครับ

    ```js
    > 12345678901234567
    12345678901234568
    ```

  - ถ้าอยากเข้าใจแบบละเอียด สามารถอ่านบทความยาว 74 หน้าอันนี้ได้: [What Every Computer Scientist Should Know About Floating-Point Arithmetic](https://docs.oracle.com/cd/E19957-01/800-7895/800-7895.pdf)
    ผมเองก็ยังอ่านบทความนั้นไม่เข้าใจทั้งหมดครับ

  - เอาเป็นว่า สำหรับบทเรียนนี้
    แค่อยากจะให้รู้ว่า บางครั้งสิ่งที่เราต้องการจะสื่อ กับสารที่คอมพิวเตอร์ได้รับ อาจจะมีความคลาดเคลื่อนไปบ้าง
    บางทีเราก็จะต้องเขียนโค้ดเพื่อรับมือกับความคลาดเคลื่อนนี้ครับ

- ต่อไปคือเกร็ดความรู้เกี่ยวกับตัวเลข
  ที่ถึงไม่รู้ก็ไม่ได้ทำให้เขียนโปรแกรมไม่ได้
  แต่บางทีเวลาเราอ่านโค้ดของคนอื่น เราอาจจะเจอสิ่งของพวกนี้
  ถ้าเรารู้ก็จะทำให้อ่านโค้ดนั้นออก

  - ในกรณีที่ตัวเลขมีจำนวนหลักมากๆ เราสามารถใช้เครื่องหมาย `_` ในการแบ่งหลัก เพื่อให้เข้าใจง่ายขึ้น

    ```js
    > 1_000_000
    1000000
    ```

  - ถ้าตัวเลขขึ้นต้นด้วย `0` แล้วตามด้วยตัวเลขอื่นๆ จะมองเป็นเลขฐานแปด (octal)

    ```js
    > 031
    25
    ```

  - ถ้าตัวเลขขึ้นต้นด้วย `0b` หมายถึงเลขฐานสอง

    ```js
    > 0b01100001
    97
    ```

  - ถ้าตัวเลขขึ้นต้นด้วย `0x` หมายถึงเลขฐานสิบหก

    ```js
    > 0x61
    97
    ```

  - เราสามารถใส่ตัว `e` เพื่อเขียนตัวเลขในรูปแบบของสัญลักษณ์วิทยาศาสตร์ได้

    ```js
    > 1e3
    1000

    > 1e-2
    0.01
    ```

    โดยห้ามมีช่องว่างระหว่าง `e` กับตัวเลขครับ

    ```js
    > 1e - 2
    // ! Uncaught SyntaxError: Invalid or unexpected token
    ```

## ลำดับการทำงานของตัวดำเนินการ (Operator precedence and associativity)

- กลับมาที่โจทย์นี้:

  > **10 + 10 &times; 0 + 10 = ?**

- ถ้าเราเปลี่ยนเป็นโค้ด JavaScript แล้วเอาไปรันใน console เราจะได้คำตอบเป็น `20` ครับ

  ```js
  > 10 + 10 * 0 + 10
  20
  ```

  แต่ทำไมเราถึงได้คำตอบแบบนี้ล่ะ?

- เวลาเราเห็นโค้ดที่เอาค่าสัก 4 ค่า มาดำเนินการอะไรสักอย่างกัน
  ถ้าเราไม่มีข้อมูลเพิ่มเติม ความหมายของมันจะค่อนข้างกำกวมครับ

  ​![](https://im.dt.in.th/ipfs/bafybeidekeeouk2by5sxjpxeo7vosimeze4ferwiixxxl3lsbuor6xipdq/image.webp)

- เพราะว่าเราสามารถจัดรูปแบบ (หรือใส่วงเล็บ) ให้มันได้ถึง 5 วิธีที่แตกต่างกัน
  ซึ่งแต่ละวิธีก็มีโอกาสที่จะได้คำตอบที่แตกต่างกันออกไป

  ![](https://im.dt.in.th/ipfs/bafybeib73uw3txofqtcpvcap5qx4foy2bb7enpoza34eujlpgb6nkirtuy/image.webp)

  | ตัวอย่างการใส่วงเล็บ   | คำตอบ |
  | ---------------------- | ----- |
  | `((10 + 10) * 0) + 10` | 10    |
  | `10 + (10 * (0 + 10))` | 110   |
  | `(10 + (10 * 0)) + 10` | 20    |
  | `10 + ((10 * 0) + 10)` | 20    |
  | `(10 + 10) * (0 + 10)` | 200   |

- …แล้วการใส่วงเล็บแบบไหนล่ะ ที่ถูกต้อง

- ในเอกสารอ้างอิงของภาษา JavaScript มีหน้านึงที่ระบุสิ่งที่เรียกว่า [“Operator precedence”](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence) หรือ ลำดับการทำงานของตัวดำเนินการครับ
  ในหน้าเว็บนี้จะมีตารางที่บอกลำดับการทำงานของตัวดำเนินการแต่ละตัวครับ
  และในตารางนี้เราจะเห็นว่า การคูณ (`*`) มีลำดับความสำคัญที่สูงกว่าการบวก (`+`) ครับ

  ![](https://im.dt.in.th/ipfs/bafybeibtuh3mgoo45stiyikycnj6jsw3k35tlq4mr737zpxbvthpoz7cca/image.webp)

- นั่นหมายความว่า ถ้าเรามีตัวดำเนินการคุณ กับตัวดำเนินการบวก
  เราจะจับกลุ่มให้ตัวดำเนินการคูณก่อนครับ

  ```
  10 + (10 * 0) + 10
  ```

- คราวนี้ เราเหลือของ 3 อย่าง มาบวกกันแล้ว
  แต่ทีนี้ เนื่องจากทั้ง Operator ด้านซ้ายเป็นการบวก และ Operator ด้านขวาก็เป็นการบวกด้วย
  แปลว่าทั้งสองตัวมีลำดับความสำคัญเท่ากัน
  แต่ในตารางเดียวกันนี้ ก็ได้ระบุไว้ด้วยว่า
  เครื่องหมาย `+` จะมีสิ่งที่เรียกว่า associativity จากซ้ายไปขวา
  นั่นแปลว่า ให้เราจับกลุ่มเครื่องหมาย + จากซ้ายไปขวาครับ

  ```
  (10 + (10 * 0)) + 10
  ```

- แค่นี้มันก็ไม่กำกวมแล้ว และเราสามารถคำนวณคำตอบได้เป็น 20 ครับ
